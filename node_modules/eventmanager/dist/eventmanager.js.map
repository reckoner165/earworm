{"version":3,"file":"eventmanager.js","sources":["../src/eventmanager.js"],"sourcesContent":["export default function eventManager(obj) {\n    obj = obj || {};\n    var events = {};\n\n    // Add a listener for an event\n    obj.on = function(eventName, handler) {\n        eventName = [].concat(eventName);\n\n        for (var i = 0, length = eventName.length; i < length; i++) {\n            var currentEvent = eventName[i];\n\n            if (!currentEvent) {\n                throw new Error('Tried to listen for an undefined event.');\n            }\n\n            if (!events[currentEvent]) {\n                events[currentEvent] = [];\n            }\n\n            events[currentEvent].push(handler);\n        }\n\n        return obj;\n    };\n\n    // Add a listener for an event that will run one time only\n    obj.once = function(eventName, handler) {\n        function wrappedHandler() {\n            handler.apply(obj.off(eventName, wrappedHandler), arguments);\n        }\n\n        // Store a reference to the original handler so we can remove it\n        // if you call off with that handler.\n        wrappedHandler.handler = handler;\n\n        return obj.on(eventName, wrappedHandler);\n    };\n\n    // Remove a listener from an event\n    obj.off = function(eventName, handler) {\n        eventName = [].concat(eventName);\n\n        for (var i = 0, length = eventName.length; i < length; i++) {\n            var currentEvent = eventName[i];\n\n            if (!currentEvent) {\n                throw new Error('Tried to remove an undefined event.');\n            }\n\n            if (currentEvent in events) {\n                var index = events[currentEvent].indexOf(handler);\n\n                // Loop through all the handlers to find the wrapper so we can remove it\n                // Not in there, return\n                if (index === -1) {\n                    for (var j = 0, jlength = events[currentEvent].length; j < jlength; j++) {\n                        if (events[currentEvent][j].handler === handler) {\n                            index = i;\n                            break;\n                        }\n                    }\n\n                    if (index === -1) {\n                        return obj;\n                    }\n                }\n\n                events[currentEvent].splice(index, 1);\n            }\n        }\n\n        return obj;\n    };\n\n    // Fire an event\n    obj.fire = function(eventName) {\n        if (!eventName) {\n            throw new Error('Tried to fire an undefined event.');\n        }\n\n        if (eventName in events) {\n\n            // Make a copy so that we will definitely loop through all,\n            // even if a handler is removed during the loop (by once, for example).\n            var eventsCopy = events[eventName].slice(0);\n\n            for (var i = 0, length = eventsCopy.length; i < length; i++) {\n                eventsCopy[i].apply(obj, eventsCopy.slice.call(arguments, 1));\n            }\n        }\n\n        return obj;\n    };\n\n    return obj;\n}\n"],"names":[],"mappings":"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"}